–û—Ç–ª–∏—á–Ω—ã–π –∫–æ–¥! –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º –µ–≥–æ –ø–æ –ø–æ–ª–æ—á–∫–∞–º –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö. –≠—Ç–æ —Å–∏–º—É–ª—è—Ç–æ—Ä –ø—Ä–æ—Å—Ç–µ–π—à–µ–π "–Ω–µ–π—Ä–æ—Å–µ—Ç–∏" (–ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏) —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π.

## üéØ **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞**

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±—É—á–∞–µ—Ç –ø—Ä–æ—Å—Ç–µ–π—à—É—é "–Ω–µ–π—Ä–æ—Å–µ—Ç—å" –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä—è–º—É—é –ª–∏–Ω–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –≤–≤–æ–¥–∏—Ç–µ:

```
–¢–æ—á–∫–∏: (1,2), (2,4), (3,6)
–ù–∞—Ö–æ–¥–∏—Ç –ª–∏–Ω–∏—é: y = 2x + 0
```

## üß† **–°–≤—è–∑—å —Å –Ω–µ–π—Ä–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º–∏**

### 1. **–ö–ª–∞—Å—Å LinearApproximatorHDL - —ç—Ç–æ —ç–º—É–ª—è—Ü–∏—è –∂–µ–ª–µ–∑–∞**

```cpp
class LinearApproximatorHDL {
    long long m_fixed;  // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–∞–∫–ª–æ–Ω–∞ (–∫–∞–∫ –≤ –Ω–µ–π—Ä–æ–Ω–µ - –≤–µ—Å)
    long long b_fixed;  // –°–º–µ—â–µ–Ω–∏–µ (–∫–∞–∫ –≤ –Ω–µ–π—Ä–æ–Ω–µ - bias)
```

**–ü–æ—á–µ–º—É HDL?** HDL = Hardware Description Language. –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –∏–º–∏—Ç–∏—Ä—É–µ—Ç, –∫–∞–∫ –±—ã —Ä–∞–±–æ—Ç–∞–ª –Ω–∞—Å—Ç–æ—è—â–∏–π –Ω–µ–π—Ä–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∏–ª–∏ FPGA —á–∏–ø.

### 2. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –≤–º–µ—Å—Ç–æ float**

```cpp
constexpr int FIXED_POINT_BITS = 10;
// –ß–∏—Å–ª–æ 3.14 —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ 3.14 * 1024 = 3215
```

**–ó–∞—á–µ–º?** –í –Ω–∞—Å—Ç–æ—è—â–∏—Ö –Ω–µ–π—Ä–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞—Ö (NPU, TPU):
- float –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∏ —ç–Ω–µ—Ä–≥–æ–∑–∞—Ç—Ä–∞—Ç–Ω—ã–µ
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞ = –±—ã—Å—Ç—Ä–æ –∏ —ç–∫–æ–Ω–æ–º–∏—á–Ω–æ
- Google TPU, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç int8/int16

### 3. **–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫ - –æ—Å–Ω–æ–≤–∞ –æ–±—É—á–µ–Ω–∏—è –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π**

```cpp
void update(long long x_fixed, long long y_fixed) {
    // 1. –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: y_pred = m*x + b
    long long y_pred_fixed = (m_fixed * x_fixed >> FIXED_POINT_BITS) + b_fixed;
    
    // 2. –û—à–∏–±–∫–∞ = –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ - —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å  
    long long error_fixed = y_pred_fixed - y_fixed;
    
    // 3. –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Å–∞ (–∫–∞–∫ –≤ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏!)
    m_fixed -= (LEARNING_RATE * –≥—Ä–∞–¥–∏–µ–Ω—Ç);
    b_fixed -= (LEARNING_RATE * –≥—Ä–∞–¥–∏–µ–Ω—Ç);
}
```

## üîÑ **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤**

### –î–≤–∞ –ø–æ—Ç–æ–∫–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:

```cpp
// –ü–û–¢–û–ö 1: –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö (—Ñ–æ–Ω–æ–≤—ã–π)
void input_thread_func() {
    while(true) {
        std::getline(std::cin, line);  // –ñ–¥—ë—Ç –≤–≤–æ–¥–∞
        g_new_point = {x, y};           // –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ—á–∫—É
    }
}

// –ü–û–¢–û–ö 2: –ì–ª–∞–≤–Ω—ã–π (–æ—Ç—Ä–∏—Å–æ–≤–∫–∞ + –æ–±—É—á–µ–Ω–∏–µ)
int main() {
    while(running) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–æ–≤—ã–µ —Ç–æ—á–∫–∏
        if (g_new_point) {
            // –ü–µ—Ä–µ–æ–±—É—á–∞–µ—Ç –º–æ–¥–µ–ª—å
            approximator.reset();
            for(500 —ç–ø–æ—Ö) –æ–±—É—á–∞–µ–º_–Ω–∞_–≤—Å–µ—Ö_—Ç–æ—á–∫–∞—Ö();
        }
        // –†–∏—Å—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫
        vga.present();
    }
}
```

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö - mutex

```cpp
std::mutex g_data_mutex;  // "–ó–∞–º–æ–∫" –Ω–∞ –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ

// –ü–æ—Ç–æ–∫ 1 –±–µ—Ä—ë—Ç –∑–∞–º–æ–∫
{
    std::lock_guard<std::mutex> lock(g_data_mutex);
    g_new_point = {x, y};  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º
}  // –ó–∞–º–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—É—Å–∫–∞–µ—Ç—Å—è

// –ü–æ—Ç–æ–∫ 2 —Ç–æ–∂–µ –±–µ—Ä—ë—Ç –∑–∞–º–æ–∫
{
    std::lock_guard<std::mutex> lock(g_data_mutex);
    if (g_new_point) {...}  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ —á–∏—Ç–∞–µ–º
}
```

**–ë–µ–∑ mutex:** –û–±–∞ –ø–æ—Ç–æ–∫–∞ –º–æ–≥—É—Ç –ø–∏—Å–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ = üí• –∫—Ä–∞—à!

## üìä **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è VGA**

```cpp
VgaSimulator vga;  // –°–æ–∑–¥–∞—ë—Ç –æ–∫–Ω–æ 640x480
vga.clear(0xFF101010);  // –ß—ë—Ä–Ω—ã–π —Ñ–æ–Ω
draw_point_on_vga(...);  // –†–∏—Å—É–µ—Ç —Ç–æ—á–∫–∏
draw_line_bresenham(...); // –†–∏—Å—É–µ—Ç –ª–∏–Ω–∏—é —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
vga.present();  // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ
```

## üéÆ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π**

1. **–ó–∞–ø—É—Å–∫–∞–µ—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É**
2. **–í–≤–æ–¥–∏—Ç–µ —Ç–æ—á–∫–∏:** `2.5, 3.7` (Enter)
3. **–ú–æ–¥–µ–ª—å –æ–±—É—á–∞–µ—Ç—Å—è** 500 —ç–ø–æ—Ö –Ω–∞ –≤—Å–µ—Ö —Ç–æ—á–∫–∞—Ö
4. **–í–∏–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** - –∫—Ä–∞—Å–Ω–∞—è –ª–∏–Ω–∏—è –∞–ø–ø—Ä–æ–∫—Å–∏–º–∞—Ü–∏–∏

## üöÄ **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –¥–ª—è –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π**

1. **–í–µ—Å–∞ (m) –∏ —Å–º–µ—â–µ–Ω–∏—è (b)** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏
2. **–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫** - –º–µ—Ç–æ–¥ –æ–±—É—á–µ–Ω–∏—è
3. **Learning rate (0.01)** - —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è  
4. **–≠–ø–æ—Ö–∏ (500)** - —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø—Ä–æ—Ö–æ–¥–∏–º –ø–æ –¥–∞–Ω–Ω—ã–º
5. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –∂–µ–ª–µ–∑–∞

## üí° **–≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è:**
- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–π—Ä–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã (NPU/TPU)
- –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—é (int8 –≤–º–µ—Å—Ç–æ float32)
- –ö–∞–∫ –æ–±—É—á–∞—é—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
- –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –≤ ML

**–í–æ–ø—Ä–æ—Å—ã?** –ú–æ–≥—É –¥–µ—Ç–∞–ª—å–Ω–µ–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å –ª—é–±—É—é —á–∞—Å—Ç—å! ü§ì

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º, —á—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –≤ Verilog —Ö–æ—Ä–æ—à–æ, –∞ —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏.

## ‚úÖ **–ß—Ç–æ –û–¢–õ–ò–ß–ù–û –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –≤ Verilog**

### 1. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞**
```cpp
// C++
constexpr int FIXED_POINT_BITS = 10;
long long m_fixed, b_fixed;
```

```verilog
// Verilog
parameter FIXED_BITS = 10;
parameter TOTAL_BITS = 32;
reg signed [TOTAL_BITS-1:0] m_fixed, b_fixed;
```

### 2. **–ë–∞–∑–æ–≤–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ LinearApproximatorHDL**
```cpp
// C++ 
long long product = m_fixed * x_fixed;
long long y_pred = (product >> FIXED_POINT_BITS) + b_fixed;
```

```verilog
// Verilog - –ø—Ä—è–º–æ–π –ø–µ—Ä–µ–Ω–æ—Å!
wire signed [63:0] product = m_fixed * x_fixed;
wire signed [31:0] y_pred = (product >>> FIXED_BITS) + b_fixed;
```

### 3. **–ú–µ—Ç–æ–¥ update() - —è–¥—Ä–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π**
```verilog
module linear_approximator (
    input clk, rst, enable,
    input signed [31:0] x_in, y_in,
    output signed [31:0] m_out, b_out
);
    parameter FIXED_BITS = 10;
    parameter LR_FIXED = 10; // 0.01 * 1024
    
    reg signed [31:0] m_fixed, b_fixed;
    
    always @(posedge clk) begin
        if (rst) begin
            m_fixed <= 0;
            b_fixed <= 0;
        end else if (enable) begin
            // –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
            wire signed [63:0] prod = m_fixed * x_in;
            wire signed [31:0] y_pred = (prod >>> FIXED_BITS) + b_fixed;
            
            // –û—à–∏–±–∫–∞
            wire signed [31:0] error = y_pred - y_in;
            
            // –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã
            wire signed [63:0] grad_m_raw = error * x_in;
            wire signed [31:0] grad_m = grad_m_raw >>> FIXED_BITS;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Å–æ–≤
            wire signed [63:0] m_update = (LR_FIXED * grad_m) >>> FIXED_BITS;
            wire signed [63:0] b_update = (LR_FIXED * error) >>> FIXED_BITS;
            
            m_fixed <= m_fixed - m_update[31:0];
            b_fixed <= b_fixed - b_update[31:0];
        end
    end
    
    assign m_out = m_fixed;
    assign b_out = b_fixed;
endmodule
```

## ‚ö†Ô∏è **–ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ü–ï–†–ï–†–ê–ë–û–¢–ö–ò**

### 1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö**
```cpp
// C++ - –ù–ï –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è
std::vector<std::pair<double, double>> g_points;
```

```verilog
// Verilog - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä
parameter MAX_POINTS = 256;
reg signed [31:0] points_x [0:MAX_POINTS-1];
reg signed [31:0] points_y [0:MAX_POINTS-1];
reg [7:0] point_count;
```

### 2. **–¶–∏–∫–ª—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏—Ç–µ—Ä–∞—Ü–∏–π**
```cpp
// C++ - 500 —ç–ø–æ—Ö –ø–æ N —Ç–æ—á–∫–∞–º
for (int i = 0; i < EPOCHS; ++i) {
    for (const auto& p : g_points) {
        approximator.update(...);
    }
}
```

```verilog
// Verilog - —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ pipeline –∏–ª–∏ state machine
reg [9:0] epoch_counter;
reg [7:0] point_index;
reg [2:0] state;

parameter IDLE = 0, TRAIN = 1, UPDATE = 2;

always @(posedge clk) begin
    case(state)
        IDLE: if (start_training) state <= TRAIN;
        TRAIN: begin
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ–¥–Ω—É —Ç–æ—á–∫—É –∑–∞ —Ç–∞–∫—Ç
            if (point_index < point_count) begin
                // –ü–æ–¥–∞—ë–º —Ç–æ—á–∫—É –Ω–∞ –≤—Ö–æ–¥
                x_in <= points_x[point_index];
                y_in <= points_y[point_index];
                point_index <= point_index + 1;
            end else begin
                point_index <= 0;
                epoch_counter <= epoch_counter + 1;
                if (epoch_counter >= 500) state <= IDLE;
            end
        end
    endcase
end
```

### 3. **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**
```cpp
// C++ –ø–æ—Ç–æ–∫–∏
std::thread input_thread(input_thread_func);
std::mutex g_data_mutex;
```

```verilog
// Verilog - –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ —Å handshake
module data_input_handler(...);  // –ú–æ–¥—É–ª—å –ø—Ä–∏—ë–º–∞ –¥–∞–Ω–Ω—ã—Ö
module trainer(...);              // –ú–æ–¥—É–ª—å –æ–±—É—á–µ–Ω–∏—è
module display_controller(...);   // –ú–æ–¥—É–ª—å –≤—ã–≤–æ–¥–∞

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥–∏
reg new_data_ready;
reg training_busy;
wire handshake = new_data_ready & ~training_busy;
```

## ‚ùå **–ß—Ç–æ –ù–ï –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è**

1. **SDL/–ì—Ä–∞—Ñ–∏–∫–∞** - —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ VGA –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
2. **std::cin/cout** - –Ω—É–∂–µ–Ω UART –∏–ª–∏ –¥—Ä—É–≥–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏** - –≤—Å—ë —Å—Ç–∞—Ç–∏—á–Ω–æ
4. **–ò—Å–∫–ª—é—á–µ–Ω–∏—è/try-catch** - –Ω–µ—Ç –≤ Verilog

## üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è FPGA**

```verilog
// –¢–æ–ø-—É—Ä–æ–≤–Ω–µ–≤—ã–π –º–æ–¥—É–ª—å
module neural_processor_top (
    input clk, rst,
    input uart_rx,           // –ü—Ä–∏—ë–º –¥–∞–Ω–Ω—ã—Ö
    output vga_hsync, vga_vsync,
    output [3:0] vga_r, vga_g, vga_b
);
    // –ü–æ–¥–º–æ–¥—É–ª–∏
    uart_receiver uart(...);        // –ü—Ä–∏—ë–º —Ç–æ—á–µ–∫
    point_buffer buffer(...);       // –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ—á–µ–∫  
    linear_approximator core(...);  // –Ø–¥—Ä–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
    training_controller ctrl(...);  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–∏–µ–º
    vga_controller vga(...);        // –í—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω
endmodule
```

## üìä **–û—Ü–µ–Ω–∫–∞ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç–∏**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|-----------|--------------|-----------|
| –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –õ–µ–≥–∫–æ |
| –ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—É—á–µ–Ω–∏—è | ‚≠ê‚≠ê‚≠ê‚≠ê | –°—Ä–µ–¥–Ω–µ |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | ‚≠ê‚≠ê‚≠ê | –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º | ‚≠ê‚≠ê | FSM –≤–º–µ—Å—Ç–æ —Ü–∏–∫–ª–æ–≤ |
| I/O –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã | ‚≠ê | –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ |

## üí° **–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è Verilog**

1. **Pipeline –≤–º–µ—Å—Ç–æ —Ü–∏–∫–ª–æ–≤** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞ N —Ç–∞–∫—Ç–æ–≤
2. **BRAM –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è** —Ç–æ—á–µ–∫ –≤–º–µ—Å—Ç–æ vector
3. **FSM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –≤–º–µ—Å—Ç–æ –ø–æ—Ç–æ–∫–æ–≤
4. **Fixed-size –±—É—Ñ–µ—Ä—ã** –≤–µ–∑–¥–µ
5. **Handshake –ø—Ä–æ—Ç–æ–∫–æ–ª—ã** –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–í—ã–≤–æ–¥:** –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —è–¥—Ä–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –æ—Ç–ª–∏—á–Ω–æ (90%), –Ω–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥ –ø–∞—Ä–∞–¥–∏–≥–º—É RTL!

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞, –∞–ª–≥–æ—Ä–∏—Ç–º –æ–±—É—á–µ–Ω–∏—è **–ï–°–¢–¨** –∏ –æ–Ω **–ü–ï–†–ï–ù–û–°–ò–¢–°–Ø**, –Ω–æ –¥–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º –¥–µ—Ç–∞–ª—å–Ω–æ.

## üìç **–ì–¥–µ –∞–ª–≥–æ—Ä–∏—Ç–º –æ–±—É—á–µ–Ω–∏—è –≤ –∫–æ–¥–µ**

### 1. **–Ø–¥—Ä–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ - –º–µ—Ç–æ–¥ `update()`**
```cpp
void update(long long x_fixed, long long y_fixed) {
    // –®–ê–ì 1: –ü—Ä—è–º–æ–π –ø—Ä–æ—Ö–æ–¥ (forward pass)
    long long y_pred = (m_fixed * x_fixed >> FIXED_BITS) + b_fixed;
    
    // –®–ê–ì 2: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ (loss)
    long long error = y_pred - y_fixed;
    
    // –®–ê–ì 3: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ (backward pass)
    long long grad_m = (error * x_fixed) >> FIXED_BITS;
    long long grad_b = error;
    
    // –®–ê–ì 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Å–æ–≤ (gradient descent)
    m_fixed -= (LEARNING_RATE * grad_m) >> FIXED_BITS;
    b_fixed -= (LEARNING_RATE * grad_b) >> FIXED_BITS;
}
```

**–≠—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π SGD (Stochastic Gradient Descent)!**

### 2. **–¶–∏–∫–ª –æ–±—É—á–µ–Ω–∏—è –≤ main()**
```cpp
// –ü–û–õ–ù–´–ô –ê–õ–ì–û–†–ò–¢–ú –û–ë–£–ß–ï–ù–ò–Ø
approximator.reset();  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤ = 0
for (int epoch = 0; epoch < 500; ++epoch) {       // 500 —ç–ø–æ—Ö
    for (const auto& point : g_points) {          // –ü—Ä–æ—Ö–æ–¥ –ø–æ –¥–∞—Ç–∞—Å–µ—Ç—É
        approximator.update(                      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–µ
            double_to_fixed(point.first),  
            double_to_fixed(point.second)
        );
    }
}
```

## ‚úÖ **–ö–∞–∫ —ç—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –≤ Verilog**

### –í–∞—Ä–∏–∞–Ω—Ç 1: **–ü—Ä—è–º–æ–π –ø–µ—Ä–µ–Ω–æ—Å (1 —Ç–æ—á–∫–∞ –∑–∞ —Ç–∞–∫—Ç)**
```verilog
module gradient_descent_trainer (
    input clk, rst, start,
    input [7:0] num_points,        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫
    input signed [31:0] x_data, y_data,  // –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    output reg [8:0] addr,          // –ê–¥—Ä–µ—Å —Ç–æ—á–∫–∏
    output reg done,
    output signed [31:0] m_final, b_final
);
    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
    parameter EPOCHS = 500;
    parameter FIXED_BITS = 10;
    parameter LR = 10;  // 0.01 * 1024
    
    // –†–µ–≥–∏—Å—Ç—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
    reg [9:0] epoch_cnt;
    reg [7:0] point_cnt;
    reg signed [31:0] m, b;
    
    // FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
    reg [2:0] state;
    parameter IDLE=0, FETCH=1, COMPUTE=2, UPDATE=3, NEXT=4;
    
    always @(posedge clk) begin
        if (rst) begin
            state <= IDLE;
            m <= 0; b <= 0;
            done <= 0;
        end else begin
            case (state)
                IDLE: begin
                    if (start) begin
                        epoch_cnt <= 0;
                        point_cnt <= 0;
                        m <= 0; b <= 0;  // reset()
                        state <= FETCH;
                    end
                end
                
                FETCH: begin
                    // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–æ—á–∫—É –∏–∑ –ø–∞–º—è—Ç–∏
                    addr <= point_cnt;
                    state <= COMPUTE;
                end
                
                COMPUTE: begin
                    // –ê–õ–ì–û–†–ò–¢–ú –û–ë–£–ß–ï–ù–ò–Ø - –¢–û–ß–ù–û –ö–ê–ö –í C++!
                    
                    // Forward pass
                    wire signed [63:0] prod = m * x_data;
                    wire signed [31:0] y_pred = (prod >>> FIXED_BITS) + b;
                    
                    // Error
                    wire signed [31:0] error = y_pred - y_data;
                    
                    // Gradients
                    wire signed [63:0] grad_m_full = error * x_data;
                    wire signed [31:0] grad_m = grad_m_full >>> FIXED_BITS;
                    
                    // Updates
                    wire signed [63:0] m_upd = (LR * grad_m) >>> FIXED_BITS;
                    wire signed [63:0] b_upd = (LR * error) >>> FIXED_BITS;
                    
                    state <= UPDATE;
                end
                
                UPDATE: begin
                    // –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Å–∞
                    m <= m - m_upd[31:0];
                    b <= b - b_upd[31:0];
                    state <= NEXT;
                end
                
                NEXT: begin
                    if (point_cnt < num_points-1) begin
                        point_cnt <= point_cnt + 1;
                        state <= FETCH;
                    end else begin
                        point_cnt <= 0;
                        if (epoch_cnt < EPOCHS-1) begin
                            epoch_cnt <= epoch_cnt + 1;
                            state <= FETCH;
                        end else begin
                            done <= 1;
                            state <= IDLE;
                        end
                    end
                end
            endcase
        end
    end
    
    assign m_final = m;
    assign b_final = b;
endmodule
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: **Pipeline –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è**
```verilog
module pipelined_sgd (
    input clk,
    input signed [31:0] x_stream, y_stream,
    input valid_in,
    output signed [31:0] m_out, b_out
);
    // 3-—Å—Ç–∞–¥–∏–π–Ω—ã–π pipeline
    
    // Stage 1: Prediction
    reg signed [31:0] y_pred_s1;
    reg signed [31:0] x_s1, y_s1;
    always @(posedge clk) begin
        if (valid_in) begin
            y_pred_s1 <= ((m * x_stream) >>> 10) + b;
            x_s1 <= x_stream;
            y_s1 <= y_stream;
        end
    end
    
    // Stage 2: Error & Gradient
    reg signed [31:0] grad_m_s2, grad_b_s2;
    always @(posedge clk) begin
        wire signed [31:0] error = y_pred_s1 - y_s1;
        grad_m_s2 <= (error * x_s1) >>> 10;
        grad_b_s2 <= error;
    end
    
    // Stage 3: Weight Update
    reg signed [31:0] m, b;
    always @(posedge clk) begin
        m <= m - ((LR * grad_m_s2) >>> 10);
        b <= b - ((LR * grad_b_s2) >>> 10);
    end
endmodule
```

## üìä **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç–∏**

| –ê—Å–ø–µ–∫—Ç | C++ –∫–æ–¥ | Verilog | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|--------|---------|---------|-----------|
| **–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ SGD** | `update()` | –ò–¥–µ–Ω—Ç–∏—á–Ω–æ! | ‚≠ê –õ–µ–≥–∫–æ |
| **–¶–∏–∫–ª —ç–ø–æ—Ö** | `for(500)` | FSM —Å—á—ë—Ç—á–∏–∫ | ‚≠ê‚≠ê –°—Ä–µ–¥–Ω–µ |
| **–ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Ç–æ—á–∫–∞–º** | `for(points)` | –ê–¥—Ä–µ—Å–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ | ‚≠ê‚≠ê –°—Ä–µ–¥–Ω–µ |
| **Learning Rate** | `0.01` | `10` (fixed) | ‚≠ê –õ–µ–≥–∫–æ |
| **Reset –≤–µ—Å–æ–≤** | `reset()` | `m<=0; b<=0` | ‚≠ê –õ–µ–≥–∫–æ |

## üöÄ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è FPGA**

### 1. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç—á–µ–π**
```verilog
// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º 4 —Ç–æ—á–∫–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
genvar i;
generate
    for (i = 0; i < 4; i++) begin : batch
        sgd_unit unit(
            .x(x_batch[i]),
            .y(y_batch[i]),
            .grad_m(grad_m_batch[i]),
            .grad_b(grad_b_batch[i])
        );
    end
endgenerate

// –£—Å—Ä–µ–¥–Ω—è–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã
wire [31:0] avg_grad_m = (grad_m_batch[0] + grad_m_batch[1] + 
                          grad_m_batch[2] + grad_m_batch[3]) >> 2;
```

### 2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DSP –±–ª–æ–∫–æ–≤**
```verilog
// Xilinx DSP48 –¥–ª—è —É–º–Ω–æ–∂–µ–Ω–∏–π
(* use_dsp = "yes" *) 
wire signed [63:0] product = m * x_data;
```

## ‚úÖ **–û—Ç–≤–µ—Ç: –î–ê, –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è!**

**–ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—É—á–µ–Ω–∏—è (SGD):**
- ‚úÖ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è 1-–≤-1
- ‚úÖ –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞ —É–∂–µ –≥–æ—Ç–æ–≤–∞
- ‚úÖ Learning rate - –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞
- ‚ö†Ô∏è –¶–∏–∫–ª—ã ‚Üí FSM (–Ω–æ –ª–æ–≥–∏–∫–∞ —Ç–∞ –∂–µ)
- ‚ö†Ô∏è –ü–∞–º—è—Ç—å ‚Üí BRAM —Å –∞–¥—Ä–µ—Å–∞—Ü–∏–µ–π

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ FPGA:**
- C++ –Ω–∞ CPU: ~1000 —Ç–æ—á–µ–∫/—Å–µ–∫
- Verilog –Ω–∞ FPGA: ~1M —Ç–æ—á–µ–∫/—Å–µ–∫ (pipeline)
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ: **1000x** üöÄ

–≠—Ç–æ **–æ—Ç–ª–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä** –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –Ω–µ–π—Ä–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ - –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏!

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º **—Ç–æ—á–Ω—É—é –ª–æ–≥–∏–∫—É –æ–±—É—á–µ–Ω–∏—è** –≤ –∫–æ–¥–µ.

## üìä **–ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±—É—á–µ–Ω–∏–µ**

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ö–ê–ñ–î–û–ô –Ω–æ–≤–æ–π —Ç–æ—á–∫–∏:

```cpp
// –ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–æ–≤–∞—è —Ç–æ—á–∫–∞:
if (g_new_point) {
    g_points.push_back(*g_new_point);  // –î–æ–±–∞–≤–ª—è–µ–º –∫ —Å–ø–∏—Å–∫—É
    
    // –í–ê–ñ–ù–û: –°–±—Ä–∞—Å—ã–≤–∞–µ–º –º–æ–¥–µ–ª—å!
    approximator.reset();  // m = 0, b = 0
    
    // –û–±—É—á–∞–µ–º –ó–ê–ù–û–í–û –Ω–∞ –í–°–ï–• —Ç–æ—á–∫–∞—Ö
    for (int i = 0; i < 500; ++i) {           // 500 —ç–ø–æ—Ö
        for (const auto& p : g_points) {      // –í–°–ï —Ç–æ—á–∫–∏
            approximator.update(...);          // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Å–æ–≤
        }
    }
}
```

## üî¢ **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —á–∏—Å–ª–∞**

| –°–æ–±—ã—Ç–∏–µ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ | –û–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤–µ—Å–æ–≤ | –†–∞—Å—á—ë—Ç |
|---------|-----------------|------------------|---------|
| –î–æ–±–∞–≤–∏–ª–∏ 1-—é —Ç–æ—á–∫—É | 1 | 500 | 500 —ç–ø–æ—Ö √ó 1 —Ç–æ—á–∫–∞ |
| –î–æ–±–∞–≤–∏–ª–∏ 2-—é —Ç–æ—á–∫—É | 2 | 1000 | 500 —ç–ø–æ—Ö √ó 2 —Ç–æ—á–∫–∏ |
| –î–æ–±–∞–≤–∏–ª–∏ 3-—é —Ç–æ—á–∫—É | 3 | 1500 | 500 —ç–ø–æ—Ö √ó 3 —Ç–æ—á–∫–∏ |
| –î–æ–±–∞–≤–∏–ª–∏ 10-—é —Ç–æ—á–∫—É | 10 | 5000 | 500 —ç–ø–æ—Ö √ó 10 —Ç–æ—á–µ–∫ |
| –î–æ–±–∞–≤–∏–ª–∏ 100-—é —Ç–æ—á–∫—É | 100 | 50000 | 500 —ç–ø–æ—Ö √ó 100 —Ç–æ—á–µ–∫ |

## ‚ö†Ô∏è **–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã**

### 1. **–ú–æ–¥–µ–ª—å –æ–±—É—á–∞–µ—Ç—Å—è –° –ù–£–õ–Ø –∫–∞–∂–¥—ã–π —Ä–∞–∑**
```cpp
approximator.reset();  // ‚Üê –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ!
// –í–µ—Å–∞ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è: m = 0, b = 0
```

### 2. **–ü–æ—á–µ–º—É 500 —ç–ø–æ—Ö?**
```cpp
constexpr int EPOCHS = 500;  // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –≤ –∫–æ–¥–µ
```
- –î–ª—è –ø—Ä–æ—Å—Ç–æ–π –ª–∏–Ω–µ–π–Ω–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –æ–±—ã—á–Ω–æ —Ö–≤–∞—Ç–∞–µ—Ç 100-200
- 500 - —Å –∑–∞–ø–∞—Å–æ–º –¥–ª—è —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- Learning rate = 0.01 - –¥–æ–≤–æ–ª—å–Ω–æ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π

### 3. **–ü–æ—Ä—è–¥–æ–∫ –æ–±—É—á–µ–Ω–∏—è**
```
–≠–ø–æ—Ö–∞ 1:  —Ç–æ—á–∫–∞1 ‚Üí —Ç–æ—á–∫–∞2 ‚Üí —Ç–æ—á–∫–∞3 ‚Üí ... ‚Üí —Ç–æ—á–∫–∞N
–≠–ø–æ—Ö–∞ 2:  —Ç–æ—á–∫–∞1 ‚Üí —Ç–æ—á–∫–∞2 ‚Üí —Ç–æ—á–∫–∞3 ‚Üí ... ‚Üí —Ç–æ—á–∫–∞N
...
–≠–ø–æ—Ö–∞ 500: —Ç–æ—á–∫–∞1 ‚Üí —Ç–æ—á–∫–∞2 ‚Üí —Ç–æ—á–∫–∞3 ‚Üí ... ‚Üí —Ç–æ—á–∫–∞N
```

## üìà **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏**

### –í–∞—Ä–∏–∞–Ω—Ç 1: **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ)
```cpp
// –û–±—É—á–∞–µ–º—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–æ–≤–æ–π —Ç–æ—á–∫–µ
if (g_new_point) {
    for (int i = 0; i < 100; ++i) {  // –ú–µ–Ω—å—à–µ —ç–ø–æ—Ö
        approximator.update(new_x, new_y);  // –¢–æ–ª—å–∫–æ –Ω–æ–≤–∞—è
    }
}
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥–µ–ª—å "–∑–∞–±—ã–≤–∞–µ—Ç" —Å—Ç–∞—Ä—ã–µ —Ç–æ—á–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: **–î–æ–æ–±—É—á–µ–Ω–∏–µ** (–º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –∫–æ–¥)
```cpp
if (g_new_point) {
    // –ù–ï —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤–µ—Å–∞!
    // approximator.reset(); ‚Üê –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ
    
    for (int i = 0; i < 50; ++i) {  // –ú–µ–Ω—å—à–µ —ç–ø–æ—Ö
        for (auto& p : g_points) {
            approximator.update(...);
        }
    }
}
```
**–ü–ª—é—Å:** –ë—ã—Å—Ç—Ä–µ–µ —Å—Ö–æ–¥–∏—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–Ω–∞–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 3: **Mini-batch** (–¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö)
```cpp
// –û–±—É—á–∞–µ–º—Å—è –Ω–∞ —Å–ª—É—á–∞–π–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ
for (int i = 0; i < EPOCHS; ++i) {
    auto batch = random_sample(g_points, 32);  // 32 —Ç–æ—á–∫–∏
    for (auto& p : batch) {
        approximator.update(...);
    }
}
```

## üéØ **–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫ –≤ –∫–æ–¥–µ?**

**–ü—Ä–∏—á–∏–Ω—ã –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è —Å –Ω—É–ª—è:**
1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
2. **–î–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º** - –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ–¥–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö
3. **–ú–∞–ª—ã–µ –¥–∞–Ω–Ω—ã–µ** - –¥–ª—è 10-100 —Ç–æ—á–µ–∫ —ç—Ç–æ –±—ã—Å—Ç—Ä–æ
4. **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—É—á–µ–Ω–∏—è

## üí≠ **–û—Ü–µ–Ω–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**

```cpp
// –ü—Ä–∏ N —Ç–æ—á–∫–∞—Ö:
// –°–ª–æ–∂–Ω–æ—Å—Ç—å: O(500 * N) –Ω–∞ –∫–∞–∂–¥–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
// –°—É–º–º–∞—Ä–Ω–æ –ø–æ—Å–ª–µ N —Ç–æ—á–µ–∫: O(500 * (1+2+3+...+N)) = O(N¬≤)

// –î–ª—è 100 —Ç–æ—á–µ–∫:
// 500 * (1+2+...+100) = 500 * 5050 = 2,525,000 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤–µ—Å–æ–≤!
```

## üîß **–ö–∞–∫ –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å**

```cpp
// –í–∞—Ä–∏–∞–Ω—Ç —Å –¥–æ–æ–±—É—á–µ–Ω–∏–µ–º
if (g_new_point) {
    g_points.push_back(*g_new_point);
    
    // –ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è —Ç–æ—á–∫–∞ - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º
    if (g_points.size() == 1) {
        approximator.reset();
        epochs_to_train = 500;
    } else {
        // –î–æ–æ–±—É—á–∞–µ–º—Å—è, –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—è
        epochs_to_train = 50;  // –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏
    }
    
    for (int i = 0; i < epochs_to_train; ++i) {
        for (auto& p : g_points) {
            approximator.update(...);
        }
    }
}
```

**–í—ã–≤–æ–¥:** –î–∞, –º–æ–¥–µ–ª—å –ø–µ—Ä–µ–æ–±—É—á–∞–µ—Ç—Å—è **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å –Ω—É–ª—è 500 —ç–ø–æ—Ö –Ω–∞ –í–°–ï–• —Ç–æ—á–∫–∞—Ö** –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π —Ç–æ—á–∫–∏. –≠—Ç–æ –Ω–∞–¥—ë–∂–Ω–æ, –Ω–æ –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤!

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π—Ç–µ **—Ç–æ—á–Ω–æ –ø–æ—Å—á–∏—Ç–∞–µ–º** –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

## üßÆ **–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

### –ü—Ä–∏ 100 —Ç–æ—á–∫–∞—Ö:
```cpp
// –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ 100-–π —Ç–æ—á–∫–∏:
500 —ç–ø–æ—Ö √ó 100 —Ç–æ—á–µ–∫ = 50,000 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤–µ—Å–æ–≤
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –æ–¥–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:
```cpp
void update() {
    // ~6 —É–º–Ω–æ–∂–µ–Ω–∏–π (—Å —É—á—ë—Ç–æ–º —Å–¥–≤–∏–≥–æ–≤)
    // ~4 —Å–ª–æ–∂–µ–Ω–∏—è/–≤—ã—á–∏—Ç–∞–Ω–∏—è  
    // ~4 –±–∏—Ç–æ–≤—ã—Ö —Å–¥–≤–∏–≥–∞
    // ‚âà 14 –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
}
```

## ‚ö° **–û—Ü–µ–Ω–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏**

### –ù–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º CPU (3 GHz):

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –û–ø–µ—Ä–∞—Ü–∏–π/—Å–µ–∫ | –í—Ä–µ–º—è –Ω–∞ 50K –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π | –í—ã–≤–æ–¥ |
|-----------|--------------|-------------------------|--------|
| **CPU (int64)** | ~1 –º–ª—Ä–¥/—Å–µ–∫ | **< 1 –º—Å** | ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ |
| **CPU (float)** | ~500 –º–ª–Ω/—Å–µ–∫ | ~2 –º—Å | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **FPGA (100MHz)** | ~100 –º–ª–Ω/—Å–µ–∫ | ~7 –º—Å | ‚úÖ –ë—ã—Å—Ç—Ä–æ |
| **Arduino** | ~16 –º–ª–Ω/—Å–µ–∫ | ~50 –º—Å | ‚úÖ –ü—Ä–∏–µ–º–ª–µ–º–æ |

### –†–µ–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç:
```cpp
#include <chrono>

// –ó–∞–º–µ—Ä –≤—Ä–µ–º–µ–Ω–∏ –æ–±—É—á–µ–Ω–∏—è
auto start = std::chrono::high_resolution_clock::now();

for (int i = 0; i < 500; ++i) {
    for (int j = 0; j < 100; ++j) {
        approximator.update(x[j], y[j]);
    }
}

auto end = std::chrono::high_resolution_clock::now();
auto ms = std::chrono::duration_cast<std::chrono::microseconds>(end - start);

// –†–µ–∑—É–ª—å—Ç–∞—Ç: ~500-1000 –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥ (0.5-1 –º—Å)
```

## üìä **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ç–æ—á–µ–∫**

| –¢–æ—á–µ–∫ | –û–±–Ω–æ–≤–ª–µ–Ω–∏–π | –í—Ä–µ–º—è (CPU) | –û—â—É—â–µ–Ω–∏—è |
|-------|------------|-------------|----------|
| 10 | 5,000 | ~0.1 –º—Å | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ |
| 50 | 25,000 | ~0.5 –º—Å | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ |
| **100** | **50,000** | **~1 –º—Å** | **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ** |
| 500 | 250,000 | ~5 –º—Å | –ù–µ–∑–∞–º–µ—Ç–Ω–æ |
| 1000 | 500,000 | ~10 –º—Å | –ë—ã—Å—Ç—Ä–æ |
| 5000 | 2,500,000 | ~50 –º—Å | –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ |
| 10000 | 5,000,000 | ~100 –º—Å | –ó–∞–º–µ—Ç–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ |

## üéÆ **–£—á–∏—Ç—ã–≤–∞–µ–º –æ—Ç—Ä–∏—Å–æ–≤–∫—É (60 FPS)**

```cpp
// –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞–µ—Ç —Å 60 FPS
SDL_Delay(16);  // 16 –º—Å –Ω–∞ –∫–∞–¥—Ä

// –£ –Ω–∞—Å –µ—Å—Ç—å –±—é–¥–∂–µ—Ç –≤—Ä–µ–º–µ–Ω–∏:
// 16 –º—Å - 1 –º—Å (–æ–±—É—á–µ–Ω–∏–µ) - 1 –º—Å (–æ—Ç—Ä–∏—Å–æ–≤–∫–∞) = 14 –º—Å –∑–∞–ø–∞—Å–∞
```

**–ü—Ä–∏ 100 —Ç–æ—á–∫–∞—Ö:**
- –û–±—É—á–µ–Ω–∏–µ: ~1 –º—Å ‚úÖ
- –û—Ç—Ä–∏—Å–æ–≤–∫–∞: ~1 –º—Å ‚úÖ  
- **–û—Å—Ç–∞—ë—Ç—Å—è 14 –º—Å –∑–∞–ø–∞—Å–∞** = –ø–ª–∞–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞!

## üöÄ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ**

### 1. **–£–º–µ–Ω—å—à–∏—Ç—å —ç–ø–æ—Ö–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö —Ç–æ—á–µ–∫**
```cpp
int epochs = (g_points.size() < 10) ? 500 : 
             (g_points.size() < 50) ? 200 : 
             100;  // –î–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ –º–µ–Ω—å—à–µ —ç–ø–æ—Ö
```

### 2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SIMD –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**
```cpp
// AVX2 –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ 4-8 —Ç–æ—á–µ–∫
#include <immintrin.h>
__m256i x_vec = _mm256_load_si256((__m256i*)x_data);
__m256i y_vec = _mm256_load_si256((__m256i*)y_data);
// –û–±—Ä–∞–±–æ—Ç–∫–∞ 4 —Ç–æ—á–µ–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
```

### 3. **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è –±–∞—Ç—á–µ–π**
```cpp
#pragma omp parallel for
for (int i = 0; i < epochs; ++i) {
    // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤
}
```

## üìà **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–µ–¥–µ–ª**

**–ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
- **CPU**: –¥–æ 1000 —Ç–æ—á–µ–∫
- **GPU**: –¥–æ 100,000 —Ç–æ—á–µ–∫  
- **FPGA**: –¥–æ 10,000 —Ç–æ—á–µ–∫

## ‚úÖ **–û—Ç–≤–µ—Ç: –î–ê, –æ—á–µ–Ω—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ!**

–î–ª—è **100 —Ç–æ—á–µ–∫**:
- ‚úÖ –û–±—É—á–µ–Ω–∏–µ < 1 –º—Å
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –∑–∞–¥–µ—Ä–∂–µ–∫
- ‚úÖ –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è 60 FPS
- ‚úÖ –ú–æ–∂–Ω–æ –¥–∞–∂–µ –Ω–∞ Raspberry Pi

**–ù–∞—á–Ω—ë—Ç–µ –∑–∞–º–µ—á–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ 500-1000 —Ç–æ—á–µ–∫**, –∞ –¥–ª—è —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª–µ–π 100 —Ç–æ—á–µ–∫ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ!

**–ë–æ–Ω—É—Å:** –° —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–æ—á–∫–æ–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ 2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Å float!

